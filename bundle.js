(()=>{"use strict";var t;const n={board:t=[[null,null,null],[null,null,null],[null,null,null]],displayBoard:function(){t.forEach((function(t){}))},addMark:function(n,e,r){return null===t[n][e]&&(t[n][e]=r,!0)},checkWinner:function(){for(var n=0;n<3;n++)if(t[n][0]&&t[n][0]===t[n][1]&&t[n][1]===t[n][2])return t[n][0];for(var e=0;e<3;e++)if(t[0][e]&&t[0][e]===t[1][e]&&t[1][e]===t[2][e])return t[0][e];return t[0][0]&&t[0][0]===t[1][1]&&t[1][1]===t[2][2]?t[0][0]:t[0][2]&&t[0][2]===t[1][1]&&t[1][1]===t[2][0]?t[0][2]:null},checkDraw:function(){return t.every((function(t){return t.every((function(t){return null!==t}))}))}};function e(t,n){if(t){if("string"==typeof t)return r(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(t,n):void 0}}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var o,a,l,u,i,c,d=function(t,n){return{name:t,mark:n}},f=function(t){var o=function(t,e){for(var r=0;r<3;r++)for(var o=0;o<3;o++)if(null===t[r][o]){if(t[r][o]=e,n.checkWinner(t)===e)return t[r][o]=null,[r,o];t[r][o]=null}return null},a=function(t){for(var n=[],e=0;e<3;e++)for(var r=0;r<3;r++)null===t[e][r]&&n.push([e,r]);return n.length>0?n[Math.floor(Math.random()*n.length)]:null};return{mark:t,makeMove:function(l){if(l)return null;var u=n.board.map((function(t){return function(t){if(Array.isArray(t))return r(t)}(n=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||e(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var n})),i=["win","block","best","random"],c=i[Math.floor(Math.random()*i.length)];if("win"===c){var d=o(u,t);if(d)return d}if("block"===c){var f=function(n){return o(n,"X"===t?"O":"X")}(u);if(f)return f}return"best"===c?function(t){for(var n=0,r=[[0,0],[0,2],[2,0],[2,2]];n<r.length;n++){var o=(c=2,function(t){if(Array.isArray(t))return t}(i=r[n])||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,a,l,u=[],i=!0,c=!1;try{if(a=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;i=!1}else for(;!(i=(r=a.call(e)).done)&&(u.push(r.value),u.length!==n);i=!0);}catch(t){c=!0,o=t}finally{try{if(!i&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(c)throw o}}return u}}(i,c)||e(i,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=o[0],u=o[1];if(null===t[l][u])return[l,u]}var i,c;return a(t)}(u):a(u)}}},s=(o=document.getElementById("game-board"),a=document.getElementById("result"),l=document.getElementById("game-start"),u=document.getElementById("back-to-menu"),i=function(t,n,e,r){if(n!==e&&t.target.classList.contains("cell")){var o=t.target.dataset.row,a=t.target.dataset.col;if("true"===t.target.getAttribute("data-filled"))return;void 0!==o&&void 0!==a&&(r(parseInt(o),parseInt(a)),c())}},{renderBoard:c=function(){o.innerHTML="",n.board.forEach((function(t,n){var e=document.createElement("div");e.classList.add("row"),t.forEach((function(t,r){var o=document.createElement("div");o.classList.add("cell"),o.dataset.row=n,o.dataset.col=r,o.textContent=t||"",null!==t&&o.setAttribute("data-filled","true"),e.appendChild(o)})),o.appendChild(e)}))},updateResult:function(t){a.textContent=t},blockCells:function(){document.querySelectorAll(".cell").forEach((function(t){t.removeEventListener("click",i),t.classList.add("disabled")}))},addClickListeners:function(t,n,e){o&&o.addEventListener("click",(function(r){return i(r,t,n,e)}))},showGameStartBlock:function(){l&&(l.style.display="block")},hideGameStartBlock:function(){l&&(l.style.display="none")},hideBoard:function(){o&&(o.style.display="none")},showBoard:function(){o&&(o.style.display="grid")},toggleBackToMenuButton:function(t){u&&(u.style.display=t?"block":"none")}});const y=s;function m(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var r,o,a,l,u=[],i=!0,c=!1;try{if(a=(e=e.call(t)).next,0===n){if(Object(e)!==e)return;i=!1}else for(;!(i=(r=a.call(e)).done)&&(u.push(r.value),u.length!==n);i=!0);}catch(t){c=!0,o=t}finally{try{if(!i&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(c)throw o}}return u}}(t,n)||function(t,n){if(t){if("string"==typeof t)return v(t,n);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?v(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var h,b,p,g,k,B=!1,E=!1;document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("player-vs-player"),e=document.getElementById("player-vs-computer");k=document.getElementById("restart-game");var r=document.getElementById("back-to-menu");k&&(k.style.display="none"),y.toggleBackToMenuButton(!1),r.addEventListener("click",(function(){y.hideBoard(),y.showGameStartBlock(),n.board.forEach((function(t){return t.fill(null)})),y.renderBoard(),y.updateResult(""),k&&(k.style.display="none"),y.toggleBackToMenuButton(!1),B=!1})),t.addEventListener("click",(function(){w(!1)})),e.addEventListener("click",(function(){w(!0)})),k&&k.addEventListener("click",(function(){k.style.display="none",y.showGameStartBlock(),n.board.forEach((function(t){return t.fill(null)})),y.renderBoard(),y.updateResult(""),B=!1,w(E)}))}));var w=function(t){E=t,b=d("Игрок 1","X"),p=E?f("O"):d("Игрок 2","O"),g=E?p:null,h=b,B=!1,n.board.forEach((function(t){return t.fill(null)})),y.renderBoard(),y.updateResult(""),y.hideGameStartBlock(),y.showBoard(),y.toggleBackToMenuButton(!0),y.addClickListeners(h,g,S),E&&(h=g,setTimeout((function(){var t=m(g.makeMove(),2),n=t[0],e=t[1];S(n,e),y.renderBoard()}),500)),B&&k&&(k.style.display="block")},S=function(t,e){if(!B&&n.addMark(t,e,h.mark)){y.renderBoard();var r=n.checkWinner();if(r){var o="X"===r?b.name:g?"Компьютер":p.name;return y.updateResult("".concat(o," выиграл!")),B=!0,void(k.style.display="block")}if(n.checkDraw())return y.updateResult("Ничья!"),B=!0,void(k.style.display="block");(h=h===b?p:b)!==g||B||setTimeout((function(){var t=m(g.makeMove(B),2),n=t[0],e=t[1];null!==n&&null!==e&&(S(n,e),y.renderBoard())}),500)}}})();